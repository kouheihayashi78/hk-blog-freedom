import Link from "next/link";
import { BlogPost } from "@/types/blog";
import Image from "next/image";

type Props = {
  post: BlogPost;
};

export const PostCard = ({ post }: Props) => {
  return (
    <Link
      href={`/posts/${post.id}`}
      className="group block p-4 bg-white rounded-lg border border-gray-200 transition-colors"
    >
      <div className="flex flex-col h-full">
        {post.isPinned &&
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 23 23" className="w-5"><path fill="currentColor" fillRule="evenodd" clipRule="evenodd" d="M15.4425 1.48831C15.2453 1.291 15.0019 1.14602 14.7345 1.06651C14.4671 0.986989 14.184 0.975445 13.911 1.03292C13.638 1.0904 13.3836 1.21508 13.171 1.39567C12.9583 1.57626 12.794 1.80705 12.6931 2.06714L12.0865 3.62827C11.7828 4.40926 11.3025 5.10937 10.6832 5.67381C10.0639 6.23826 9.32239 6.65171 8.51666 6.88181L4.72262 7.96569C4.44181 8.04589 4.18681 8.19803 3.98285 8.40705C3.7789 8.61607 3.63306 8.87473 3.55977 9.15742C3.48648 9.44012 3.48829 9.73705 3.565 10.0188C3.64172 10.3006 3.79068 10.5575 3.99716 10.764L7.60912 14.375L2.24821 19.7369C2.17759 19.8027 2.12095 19.882 2.08166 19.9702C2.04238 20.0584 2.02126 20.1536 2.01956 20.2501C2.01785 20.3466 2.0356 20.4424 2.07175 20.5319C2.1079 20.6214 2.16171 20.7027 2.22996 20.771C2.29821 20.8392 2.37951 20.893 2.46901 20.9292C2.5585 20.9653 2.65437 20.9831 2.75087 20.9814C2.84738 20.9797 2.94256 20.9586 3.03072 20.9193C3.11889 20.88 3.19824 20.8233 3.26404 20.7527L8.62496 15.3918L12.236 19.0028C12.4425 19.2093 12.6994 19.3583 12.9811 19.435C13.2629 19.5117 13.5599 19.5135 13.8426 19.4402C14.1252 19.3669 14.3839 19.2211 14.5929 19.0171C14.8019 18.8132 14.9541 18.5582 15.0343 18.2774L16.1182 14.4824C16.3485 13.6768 16.762 12.9355 17.3264 12.3164C17.8909 11.6973 18.5909 11.2171 19.3717 10.9135L20.9338 10.3069C21.1938 10.2058 21.4245 10.0415 21.605 9.82878C21.7855 9.61607 21.9101 9.36169 21.9674 9.08869C22.0248 8.81568 22.0132 8.53268 21.9336 8.2653C21.854 7.99793 21.709 7.75463 21.5117 7.55744L15.4425 1.48831V1.48831ZM9.12808 13.8623L9.13287 13.8671L9.13766 13.8719L13.2527 17.986C13.2822 18.0155 13.3189 18.0367 13.3592 18.0477C13.3994 18.0586 13.4418 18.0589 13.4821 18.0484C13.5225 18.038 13.5594 18.0172 13.5893 17.9881C13.6191 17.959 13.6409 17.9226 13.6524 17.8825L14.7353 14.0875C15.0265 13.0687 15.5495 12.131 16.2634 11.348C16.9773 10.5649 17.8627 9.95766 18.8504 9.57377L20.4125 8.96619C20.4496 8.95174 20.4826 8.92825 20.5084 8.89785C20.5342 8.86744 20.552 8.83108 20.5601 8.79206C20.5683 8.75304 20.5666 8.7126 20.5552 8.67439C20.5438 8.63619 20.5231 8.60143 20.4949 8.57327L14.4257 2.5051C14.3976 2.47688 14.3628 2.45613 14.3246 2.44473C14.2864 2.43333 14.246 2.43165 14.207 2.43984C14.1679 2.44802 14.1316 2.46581 14.1012 2.4916C14.0708 2.51739 14.0473 2.55036 14.0328 2.58752L13.4262 4.1496C13.0421 5.13705 12.4348 6.02225 11.6518 6.73597C10.8687 7.44968 9.93117 7.97257 8.91246 8.26373L5.11746 9.3476C5.07738 9.35909 5.04099 9.38084 5.01189 9.41069C4.98279 9.44055 4.96199 9.47748 4.95153 9.51785C4.94108 9.55821 4.94134 9.6006 4.95229 9.64083C4.96323 9.68105 4.98449 9.71773 5.01396 9.74723L9.12808 13.8623V13.8623Z"></path></svg>
        }
        {post.eyecatch && (
            <div className="mb-4 overflow-hidden rounded-md aspect-video relative">
                <Image
                    src={post.eyecatch.url}
                    alt={post.title}
                    width={post.eyecatch.width}
                    height={post.eyecatch.height}
                    priority={true}
                    className="object-cover w-full h-full group-hover:scale-105 transition-transform duration-300"
                />
            </div>
        )}
        <div className="flex-1">
          <div className="flex items-center gap-2 mb-2">
            {post.tags.map((tag) => (
              <span
                key={tag.id}
                className="px-2 py-1 text-xs font-medium text-gray-600 bg-gray-100 rounded"
              >
                # {tag.name}
              </span>
            ))}
          </div>
          <h2 className="text-xl font-bold text-gray-800 mb-2 line-clamp-2">
            {post.title}
          </h2>
          <div className="text-sm text-gray-500">
            {new Date(post.publishedAt).toLocaleDateString("ja-JP")}
          </div>
        </div>
      </div>
    </Link>
  );
};
